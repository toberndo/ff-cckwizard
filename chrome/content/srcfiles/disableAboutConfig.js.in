const Ci = Components.interfaces;
const Cc = Components.classes;

Components.utils.import("resource://gre/modules/XPCOMUtils.jsm");

function AboutHandler() {}

AboutHandler.prototype = {
  newChannel : function (aURI) {
    var ioService = Cc["@mozilla.org/network/io-service;1"].getService();
    ioService = ioService.QueryInterface(Ci.nsIIOService);
    var uri_str = "data:text/html,<h3>about:config has been disabled</h3>";
    var ext_uri = ioService.newURI(uri_str, null, null);
    var ext_channel = ioService.newChannelFromURI(ext_uri);
    return ext_channel;
  },
  getURIFlags : function getURIFlags(aURI) {
    return Ci.nsIAboutModule.URI_SAFE_FOR_UNTRUSTED_CONTENT;
  },

  classDescription: "Disable about:config - CCK",
  contractID: "@mozilla.org/network/protocol/about;1?what=config",
  classID: Components.ID("{f4616ed3-54e5-4d5b-9308-bcecc3a179d0}"),
  QueryInterface: XPCOMUtils.generateQI([Ci.nsIAboutModule]),
};

if (XPCOMUtils.generateNSGetFactory)
  var NSGetFactory = XPCOMUtils.generateNSGetFactory([AboutHandler]);
else
  var NSGetModule = XPCOMUtils.generateNSGetModule([AboutHandler]);
